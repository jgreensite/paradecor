import * as bk from '../src/backplane.js'; import makerjs from 'makerjs'; import * as fs from 'fs'; const rybPositions = Array.from({length: 101}, (_, i) => ({x: i*10, y: Math.sin(i)*10, angle: 0})); const rybProfiles = Array.from({length: 101}, () => ({width: 10, height: 60, shape: 'rect'})); const bpParams = {enabled: true, shape: 'organic', organicOffset: 5, materialThickness: 12, slotDepth: 60, dogboneRadius: 6, autoSlots: true, manualSlotPositions: []}; const m = bk.generateCncLayout(rybProfiles, bpParams as any, rybPositions); console.log('Top level models:', Object.keys(m.models).length); const bp = m.models.backplane; console.log('bp models len:', Object.keys(bp.models).length); console.log('outline paths length:', Object.keys(bp.models.outline.paths || {}).length); const dxf = makerjs.exporter.toDXF(m, {usePOLYLINE: true}); fs.writeFileSync('test_bp.dxf', dxf); console.log('Done');
